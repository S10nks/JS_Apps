<!DOCTYPE html>
<html>
<head>
  <title>To-Do List</title>
  <link rel="stylesheet" href="style.css">

  <style>

@import url('https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap');

body {
    font-family: "SUSE";
    text-align: left;
    height: 100000vh;
    background: url(Images/background.png) center center no-repeat;
    background-size: cover;
}

nav {
    display: flex;
    align-items: center;
    justify-content: space-around;
    margin-top: 1vh;
    border-bottom: #f1f1f1 2px solid;
    margin-bottom: -5vh;
}

nav > a {
    color: #f1f1f1;
    font-size: 5vh;
    text-decoration: none;
}

ul {
    list-style: none;
    padding: 0;
    color: #f1f1f1;
}

li {
    margin-bottom: 10px;
    color: #f1f1f1;
    font-size: 3vh;
}

hr {
    color: red;
    background-color: red;
}

.completed {
    text-decoration: line-through;
    color: yellow;
}

option {
    width: 5vh;
}

.‚ôû {
    background-color: red;
    color: black;
    position: absolute;
    left: 29%;
}

.‚ôú {
    background-color: orange;
    color: black;
    position: absolute;
    left: 29%;
}

.‚ôô {
    background-color: blue;
    color: white;
    position: absolute;
    left: 29%;
}

input#newTask {
    position: sticky;
    top: 90%;
    left: 64.8%;
    height: calc(5vh - 10px);
    font-size: 3vh;
    outline: none;
    border: black 5px solid;
    border-radius: .7vh;
    padding-left: 15px;
}

select {
    position: sticky;
    top: 90%;
    left: 85%;
    height: 5vh;
    border: black 5px solid;
    font-size: 3vh;
    outline: none;
    border-radius: .7vh;
}

button#addTaskBtn {
    position: sticky;
    top: 90%;
    left: 92.7%;
    height: 5vh;
    width: 5vh;
    font-size: 3vh;
    outline: none;
    border-radius: .7vh;
    background-color: crimson;
    border: black 5px solid;
}

button.completeBtn {
    position: absolute;
    left: 32%;
    font-size: 3vh
}

span.added {
    position: absolute;
    left: 20%;
}

button.deleteBtn {
    position: absolute;
    left: 35%;
    font-size: 3vh
}

a.todo {
    color: limegreen;
}

div.img {
    position: sticky;
    top: 30%;
    left: 60%;
    height: 50vh;
    width: 50vh;
}

div.img > img {
    height: 45vh;
    border-radius: 1vh;
}
  </style>

</head>
<body>

  <nav>
    <a href="" class="todo">To-Do List</a>
    <a href="" class="gro">Grocery</a>
    <a href="" class="month">September 24'</a>
  </nav>

  <input type="text" id="newTask" placeholder="Enter new task">

  <select id="priority">
    <option value="‚ôû">High</option>
    <option value="‚ôú">Medium</option>
    <option value="‚ôô">Low</option>
  </select>

  <button id="addTaskBtn">‚®•</button>

  <ol id="taskList">
  </ol>

  <div class="img"><img src="Images/cart-img.png" alt=""></div>

  <script>
    const taskList = document.getElementById('taskList');
    const newTaskInput = document.getElementById('newTask');
    const prioritySelect = document.getElementById('priority');
    const addTaskBtn = document.getElementById('addTaskBtn');

    // Load tasks from localStorage
    window.addEventListener('load', loadTasksFromStorage);

    function loadTasksFromStorage() {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      tasks.forEach(task => {
        addTaskToDOM(task.text, task.priority, task.date, task.completed);
      });
    }

    function addTaskToDOM(taskText, priority, taskDate, completed) {
      const taskItem = document.createElement('li');
      taskItem.classList.toggle('completed', completed);
      taskItem.innerHTML = `
        <span>${taskText}</span>
        <span class="${priority}">${priority}</span>
        <span class="added">${taskDate}</span>
        <button class="completeBtn">‚òë</button>
        <button class="deleteBtn">üóëÔ∏è</button>
      `;
      taskList.appendChild(taskItem);

      const completeBtn = taskItem.querySelector('.completeBtn');
      completeBtn.addEventListener('click', () => {
        taskItem.classList.toggle('completed');
        updateTaskInStorage(taskText, taskItem.classList.contains('completed'));
      });

      const deleteBtn = taskItem.querySelector('.deleteBtn');
      deleteBtn.addEventListener('click', () => {
        removeTaskFromDOM(taskItem);
        removeTaskFromStorage(taskText);
      });
    }

    function saveTaskToStorage(taskText, priority, taskDate, completed) {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      tasks.push({ text: taskText, priority: priority, date: taskDate, completed: completed });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function updateTaskInStorage(taskText, completed) {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      const taskIndex = tasks.findIndex(task => task.text === taskText);
      if (taskIndex !== -1) {
        tasks[taskIndex].completed = completed;
        localStorage.setItem('tasks', JSON.stringify(tasks));
      }
    }

    function removeTaskFromDOM(taskItem) {
      taskList.removeChild(taskItem);
    }

    function removeTaskFromStorage(taskText) {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      const taskIndex = tasks.findIndex(task => task.text === taskText);
      if (taskIndex !== -1) {
        tasks.splice(taskIndex, 1);
        localStorage.setItem('tasks', JSON.stringify(tasks));
      }
    }

    addTaskBtn.addEventListener('click', () => {
      const taskText = newTaskInput.value;
      const priority = prioritySelect.value;
      const taskDate = new Date().toLocaleDateString();
      if (taskText !== '') {
        addTaskToDOM(taskText, priority, taskDate, false);
        saveTaskToStorage(taskText, priority, taskDate, false);
        newTaskInput.value = '';
        prioritySelect.value = 'H'; // Reset priority to high
      }
    });

  </script>

</body>
</html>
